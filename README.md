# SDKWork Browser Agent

<p align="center">
  <strong>ä¼ä¸šçº§æ™ºèƒ½ä½“æ¡†æ¶ - å®‰å…¨ã€é«˜æ•ˆã€å¯æ‰©å±•</strong>
</p>

<p align="center">
  <a href="#æ ¸å¿ƒç‰¹æ€§">æ ¸å¿ƒç‰¹æ€§</a> â€¢
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#æ¶æ„è®¾è®¡">æ¶æ„è®¾è®¡</a> â€¢
  <a href="#APIæ–‡æ¡£">APIæ–‡æ¡£</a> â€¢
  <a href="#ç¤ºä¾‹">ç¤ºä¾‹</a>
</p>

---

## ğŸ“‹ ç›®å½•

- [ç®€ä»‹](#ç®€ä»‹)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [æ¨¡å—è¯´æ˜](#æ¨¡å—è¯´æ˜)
- [é…ç½®æŒ‡å—](#é…ç½®æŒ‡å—)
- [APIæ–‡æ¡£](#apiæ–‡æ¡£)
- [é«˜çº§ç®—æ³•](#é«˜çº§ç®—æ³•)
- [ç¤ºä¾‹ä»£ç ](#ç¤ºä¾‹ä»£ç )
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## ç®€ä»‹

SDKWork Browser Agent æ˜¯ä¸€ä¸ª**ä¼ä¸šçº§æ™ºèƒ½ä½“æ¡†æ¶**ï¼Œé‡‡ç”¨ä¸šç•Œé¡¶å°–æŠ€æœ¯æ ˆæ„å»ºï¼Œæä¾›å®Œæ•´çš„æ™ºèƒ½ä½“å¼€å‘è§£å†³æ–¹æ¡ˆã€‚æ¡†æ¶é›†æˆäº†è’™ç‰¹å¡æ´›æ ‘æœç´¢(MCTS)ã€å±‚æ¬¡ä»»åŠ¡ç½‘ç»œ(HTN)ã€å‘é‡æ•°æ®åº“ã€å®‰å…¨æ²™ç®±ç­‰å…ˆè¿›ç®—æ³•ï¼Œæ”¯æŒå¤æ‚å†³ç­–ã€å¤šæ­¥è§„åˆ’ã€å®‰å…¨æ‰§è¡Œç­‰é«˜çº§åŠŸèƒ½ã€‚

### è®¾è®¡ç†å¿µ

- **å®‰å…¨æ€§ä¼˜å…ˆ**: å†…ç½®å¤šå±‚å®‰å…¨é˜²æŠ¤æœºåˆ¶
- **é«˜æ€§èƒ½**: å¹¶è¡Œè®¡ç®—ã€æ™ºèƒ½ç¼“å­˜ã€å¼‚æ­¥å¤„ç†
- **å¯æ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œå®šåˆ¶
- **æ˜“ç”¨æ€§**: ç®€æ´çš„APIè®¾è®¡ï¼Œä¸°å¯Œçš„æ–‡æ¡£å’Œç¤ºä¾‹

---

## æ ¸å¿ƒç‰¹æ€§

### ğŸ”’ å®‰å…¨ç³»ç»Ÿ

| ç»„ä»¶ | æè¿° | çŠ¶æ€ |
|------|------|------|
| **JavaScriptå®‰å…¨æ²™ç®±** | å¤šåç«¯éš”ç¦»æ‰§è¡Œç¯å¢ƒ | âœ… å·²å®Œæˆ |
| **Prompt Injectionæ£€æµ‹** | å¤šç»´åº¦AIæ”»å‡»æ£€æµ‹ | âœ… å·²å®Œæˆ |
| **ä»£ç æ³¨å…¥é˜²æŠ¤** | è¯­æ³•éªŒè¯ä¸æ¨¡å¼æ£€æµ‹ | âœ… å·²å®Œæˆ |

### ğŸ§  æ™ºèƒ½å†³ç­–

| ç®—æ³• | åº”ç”¨åœºæ™¯ | çŠ¶æ€ |
|------|---------|------|
| **MCTSå†³ç­–å¼•æ“** | å¤æ‚å¤šæ­¥å†³ç­– | âœ… å·²å®Œæˆ |
| **å±‚æ¬¡è§„åˆ’ç³»ç»Ÿ(HTN)** | ä»»åŠ¡åˆ†è§£ä¸è§„åˆ’ | âœ… å·²å®Œæˆ |
| **å‘é‡ç›¸ä¼¼åº¦æœç´¢** | è¯­ä¹‰æ£€ç´¢ä¸åŒ¹é… | âœ… å·²å®Œæˆ |

### ğŸ’¾ è®°å¿†ç³»ç»Ÿ

| ç»„ä»¶ | æè¿° | çŠ¶æ€ |
|------|------|------|
| **å‘é‡åµŒå…¥ç³»ç»Ÿ** | å¤šProvideråµŒå…¥ç”Ÿæˆ | âœ… å·²å®Œæˆ |
| **å‘é‡æ•°æ®åº“** | å¤šåç«¯å‘é‡å­˜å‚¨ | âœ… å·²å®Œæˆ |
| **æ··åˆæœç´¢** | å‘é‡+æ–‡æœ¬èåˆæ£€ç´¢ | âœ… å·²å®Œæˆ |

### ğŸš€ é«˜çº§åŠŸèƒ½

- **å¹¶è¡Œæ¨¡æ‹Ÿ**: MCTSæ”¯æŒå¤šçº¿ç¨‹å¹¶è¡Œæœç´¢
- **æ¸è¿›å¼æ‹“å®½**: åŠ¨æ€æ‰©å±•æœç´¢ç©ºé—´
- **RAVEä¼˜åŒ–**: å¿«é€ŸåŠ¨ä½œä»·å€¼ä¼°è®¡
- **ååºè§„åˆ’**: ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
- **è®¡åˆ’ä¿®å¤**: è¿è¡Œæ—¶åŠ¨æ€é‡æ–°è§„åˆ’

---

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/sdkwork-browser-agent.git
cd sdkwork-browser-agent

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build
```

### åŸºç¡€ä½¿ç”¨

```typescript
import { Agent } from './src/agent/agent.js';
import { MCTSFactory } from './src/algorithms/mcts-decision-engine.js';
import { VectorDatabaseFactory } from './src/memory/vector-database.js';

// åˆ›å»ºæ™ºèƒ½ä½“
const agent = new Agent({
  name: 'MyAgent',
  model: 'gpt-4',
  decisionEngine: MCTSFactory.createBalanced()
});

// æ‰§è¡Œå†³ç­–
const result = await agent.decide({
  state: initialState,
  actions: availableActions
});

console.log('å†³ç­–ç»“æœ:', result.selectedAction);
```

### å‘é‡æ•°æ®åº“ä½¿ç”¨

```typescript
import { VectorDatabaseFactory } from './src/memory/vector-database.js';
import { EmbeddingProviderFactory } from './src/embeddings/embedding-provider.js';

// åˆ›å»ºåµŒå…¥æä¾›å™¨
const embedder = EmbeddingProviderFactory.create({
  provider: 'openai',
  model: 'text-embedding-3-small'
});

// åˆ›å»ºå‘é‡æ•°æ®åº“
const db = VectorDatabaseFactory.createMemory({
  dimension: 1536,
  metric: 'cosine'
});

await db.initialize();

// æ’å…¥æ–‡æ¡£
await db.insert({
  id: 'doc-1',
  vector: await embedder.embed('è¦å­˜å‚¨çš„æ–‡æœ¬'),
  content: 'è¦å­˜å‚¨çš„æ–‡æœ¬',
  metadata: { category: 'example' }
});

// æœç´¢
const results = await db.search(
  await embedder.embed('æŸ¥è¯¢æ–‡æœ¬'),
  { limit: 5, threshold: 0.7 }
);
```

### å±‚æ¬¡è§„åˆ’ä½¿ç”¨

```typescript
import { HierarchicalPlannerFactory, createInitialWorldState } from './src/algorithms/hierarchical-planning.js';

// åˆ›å»ºè§„åˆ’å™¨
const planner = HierarchicalPlannerFactory.createThorough();

// å®šä¹‰ä»»åŠ¡
const rootTask: CompoundTask = {
  id: 'root',
  name: 'å®Œæˆé¡¹ç›®',
  type: 'compound',
  methods: [{
    id: 'method-1',
    name: 'æ ‡å‡†æµç¨‹',
    applicability: [],
    subtasks: [
      { id: 'task-1', name: 'éœ€æ±‚åˆ†æ', type: 'primitive', execute: async () => ({ success: true }) },
      { id: 'task-2', name: 'å¼€å‘å®ç°', type: 'primitive', execute: async () => ({ success: true }) },
      { id: 'task-3', name: 'æµ‹è¯•éƒ¨ç½²', type: 'primitive', execute: async () => ({ success: true }) }
    ]
  }]
};

// ç”Ÿæˆè®¡åˆ’
const planResult = await planner.plan(
  rootTask,
  createInitialWorldState({ status: 'ready' })
);

if (planResult.success) {
  // æ‰§è¡Œè®¡åˆ’
  const execResult = await planner.executePlan(planResult.plan!, {
    worldState: createInitialWorldState({}),
    executionHistory: [],
    availableResources: new Map(),
    parameters: {}
  });
  
  console.log('æ‰§è¡Œç»“æœ:', execResult.success ? 'æˆåŠŸ' : 'å¤±è´¥');
}
```

---

## æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SDKWork Browser Agent                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Agentæ ¸å¿ƒ   â”‚  â”‚   å†³ç­–å¼•æ“    â”‚  â”‚   è®°å¿†ç³»ç»Ÿ    â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ â€¢ çŠ¶æ€ç®¡ç†    â”‚  â”‚ â€¢ MCTS       â”‚  â”‚ â€¢ å‘é‡æ•°æ®åº“  â”‚      â”‚
â”‚  â”‚ â€¢ å·¥å…·è°ƒç”¨    â”‚  â”‚ â€¢ HTNè§„åˆ’    â”‚  â”‚ â€¢ åµŒå…¥ç”Ÿæˆ    â”‚      â”‚
â”‚  â”‚ â€¢ æµå¼å¤„ç†    â”‚  â”‚ â€¢ ç­–ç•¥è¯„ä¼°    â”‚  â”‚ â€¢ æ··åˆæœç´¢    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   å®‰å…¨ç³»ç»Ÿ    â”‚  â”‚   ç›‘æ§ç³»ç»Ÿ    â”‚  â”‚   å®éªŒç³»ç»Ÿ    â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ â€¢ æ²™ç®±æ‰§è¡Œ    â”‚  â”‚ â€¢ æ€§èƒ½ç›‘æ§    â”‚  â”‚ â€¢ A/Bæµ‹è¯•    â”‚      â”‚
â”‚  â”‚ â€¢ æ³¨å…¥æ£€æµ‹    â”‚  â”‚ â€¢ é”™è¯¯è¿½è¸ª    â”‚  â”‚ â€¢ å‚æ•°è°ƒä¼˜    â”‚      â”‚
â”‚  â”‚ â€¢ ä»£ç å®¡æŸ¥    â”‚  â”‚ â€¢ æ—¥å¿—è®°å½•    â”‚  â”‚ â€¢ æ•ˆæœè¯„ä¼°    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      åŸºç¡€è®¾æ–½å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   LLMæ¥å£    â”‚  â”‚   å·¥å…·ç³»ç»Ÿ    â”‚  â”‚   é…ç½®ç®¡ç†    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥ â†’ Prompt Injectionæ£€æµ‹ â†’ å†³ç­–å¼•æ“ â†’ ä»»åŠ¡è§„åˆ’ â†’ å®‰å…¨æ‰§è¡Œ â†’ ç»“æœè¾“å‡º
                â†“                      â†“           â†“           â†“
           é£é™©è¯„åˆ†                MCTSæœç´¢    HTNåˆ†è§£    æ²™ç®±éš”ç¦»
```

---

## æ¨¡å—è¯´æ˜

### 1. å®‰å…¨æ¨¡å— (`src/security/`)

#### å®‰å…¨æ²™ç®± (`secure-sandbox.ts`)

æä¾›éš”ç¦»çš„JavaScriptæ‰§è¡Œç¯å¢ƒï¼Œæ”¯æŒå¤šç§åç«¯ï¼š

- **IFrameæ²™ç®±**: æµè§ˆå™¨ç¯å¢ƒéš”ç¦»
- **Web Worker**: åå°çº¿ç¨‹æ‰§è¡Œ
- **Node.js isolated-vm**: æœåŠ¡å™¨ç«¯å¼ºéš”ç¦»

```typescript
import { SandboxFactory } from './src/security/secure-sandbox.js';

const sandbox = SandboxFactory.create({
  backend: 'worker',
  timeout: 5000,
  memoryLimit: 128 * 1024 * 1024,
  allowedGlobals: ['console', 'Math'],
  blockedGlobals: ['fetch', 'WebSocket']
});

const result = await sandbox.execute('return 1 + 1');
```

#### Prompt Injectionæ£€æµ‹ (`prompt-injection-detector.ts`)

å¤šç»´åº¦æ£€æµ‹ç³»ç»Ÿï¼Œè¯†åˆ«8ç§æ”»å‡»ç±»å‹ï¼š

1. æŒ‡ä»¤è¦†ç›– (Instruction Override)
2. ä¸Šä¸‹æ–‡æ“æ§ (Context Manipulation)
3. åˆ†éš”ç¬¦æ”»å‡» (Delimiter Attack)
4. ç¼–ç æ··æ·† (Encoding Obfuscation)
5. è§’è‰²æ‰®æ¼”æ”»å‡» (Role Play Attack)
6. è¶Šç‹±å°è¯• (Jailbreak Attempt)
7. ç³»ç»Ÿæç¤ºè¯æ³„éœ² (System Prompt Leak)
8. é—´æ¥æ³¨å…¥ (Indirect Injection)

```typescript
import { InjectionDetectorFactory } from './src/security/prompt-injection-detector.js';

const detector = InjectionDetectorFactory.createBalanced();

const result = await detector.detect(userInput, {
  systemPrompt: 'ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹...',
  conversationHistory: [],
  timestamp: Date.now()
});

if (result.isInjection) {
  console.log('æ£€æµ‹åˆ°æ”»å‡»:', result.attackTypes);
  console.log('é£é™©è¯„åˆ†:', result.riskScore);
}
```

### 2. å†³ç­–æ¨¡å— (`src/algorithms/`)

#### MCTSå†³ç­–å¼•æ“ (`mcts-decision-engine.ts`)

å®ç°AlphaGo/AlphaZeroæ ¸å¿ƒç®—æ³•ï¼š

```typescript
import { MCTSFactory } from './src/algorithms/mcts-decision-engine.js';

// å¿«é€Ÿæ¨¡å¼
const fastMCTS = MCTSFactory.createFast();

// å¹³è¡¡æ¨¡å¼
const balancedMCTS = MCTSFactory.createBalanced();

// æ·±åº¦æ¨¡å¼
const thoroughMCTS = MCTSFactory.createThorough();

// è‡ªå®šä¹‰é…ç½®
const customMCTS = new MCTSDecisionEngine(simulationPolicy, {
  explorationConstant: Math.sqrt(2),
  maxIterations: 1000,
  parallelSimulations: 4,
  useRAVE: true,
  usePriorKnowledge: true
});
```

#### å±‚æ¬¡è§„åˆ’ç³»ç»Ÿ (`hierarchical-planning.ts`)

HTNè§„åˆ’å®ç°ï¼Œæ”¯æŒå¤æ‚ä»»åŠ¡åˆ†è§£ï¼š

```typescript
import { HierarchicalPlannerFactory } from './src/algorithms/hierarchical-planning.js';

// å®æ—¶æ¨¡å¼
const realTimePlanner = HierarchicalPlannerFactory.createForRealTime();

// å¿«é€Ÿæ¨¡å¼
const fastPlanner = HierarchicalPlannerFactory.createFast();

// æ·±åº¦æ¨¡å¼
const thoroughPlanner = HierarchicalPlannerFactory.createThorough();
```

### 3. è®°å¿†æ¨¡å— (`src/memory/`)

#### å‘é‡æ•°æ®åº“ (`vector-database.ts`)

ç»Ÿä¸€æ¥å£æ”¯æŒå¤šç§å‘é‡æ•°æ®åº“ï¼š

```typescript
import { VectorDatabaseFactory, VectorDatabaseManager } from './src/memory/vector-database.js';

// å†…å­˜æ•°æ®åº“
const memoryDB = VectorDatabaseFactory.createMemory({
  dimension: 1536,
  metric: 'cosine',
  cacheEnabled: true
});

// ä½¿ç”¨ç®¡ç†å™¨
const manager = new VectorDatabaseManager(embeddingProvider);
manager.createMemoryDB('documents', { dimension: 1536 });

// è‡ªåŠ¨åµŒå…¥å¹¶æ’å…¥
await manager.insertWithEmbedding('documents', 'doc-1', 'æ–‡æœ¬å†…å®¹', { category: 'tech' });

// æ–‡æœ¬æœç´¢
const results = await manager.searchByText('documents', 'æŸ¥è¯¢æ–‡æœ¬', { limit: 10 });
```

### 4. åµŒå…¥æ¨¡å— (`src/embeddings/`)

#### åµŒå…¥æä¾›å™¨ (`embedding-provider.ts`)

å¤šProvideræ”¯æŒï¼š

```typescript
import { EmbeddingProviderFactory } from './src/embeddings/embedding-provider.js';

// OpenAI
const openai = EmbeddingProviderFactory.create({
  provider: 'openai',
  model: 'text-embedding-3-small',
  dimensions: 1536
});

// æœ¬åœ°æ¨¡å‹
const local = EmbeddingProviderFactory.create({
  provider: 'local',
  model: 'all-MiniLM-L6-v2',
  dimensions: 384
});

// TF-IDF (Fallback)
const tfidf = EmbeddingProviderFactory.create({
  provider: 'tfidf',
  dimensions: 384
});

// æ‰¹é‡åµŒå…¥
const vectors = await openai.embedBatch(['æ–‡æœ¬1', 'æ–‡æœ¬2', 'æ–‡æœ¬3']);
```

---

## é…ç½®æŒ‡å—

### å…¨å±€é…ç½®

```typescript
// config/agent.config.ts
export const agentConfig = {
  // LLMé…ç½®
  llm: {
    provider: 'openai',
    model: 'gpt-4',
    temperature: 0.7,
    maxTokens: 2000
  },
  
  // å†³ç­–å¼•æ“é…ç½®
  decision: {
    engine: 'mcts',
    explorationConstant: 1.414,
    maxIterations: 1000,
    timeout: 5000
  },
  
  // è®°å¿†ç³»ç»Ÿé…ç½®
  memory: {
    vectorDB: 'memory',
    embeddingProvider: 'openai',
    embeddingDimensions: 1536,
    cacheSize: 1000
  },
  
  // å®‰å…¨é…ç½®
  security: {
    enableSandbox: true,
    enableInjectionDetection: true,
    riskThreshold: 0.6,
    maxInputLength: 10000
  }
};
```

### ç¯å¢ƒå˜é‡

```bash
# LLM API Keys
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-...

# å‘é‡æ•°æ®åº“
PINECONE_API_KEY=...
PINECONE_ENVIRONMENT=...
WEAVIATE_URL=...
QDRANT_URL=...

# å®‰å…¨é…ç½®
SANDBOX_BACKEND=worker
MAX_EXECUTION_TIME=5000
```

---

## APIæ–‡æ¡£

### Agentç±»

```typescript
class Agent {
  constructor(config: AgentConfig);
  
  // æ‰§è¡Œå†³ç­–
  decide(options: DecisionOptions): Promise<DecisionResult>;
  
  // æ‰§è¡Œä»»åŠ¡
  execute(task: Task): Promise<ExecutionResult>;
  
  // æµå¼å“åº”
  stream(input: string): AsyncIterable<StreamChunk>;
  
  // è®°å¿†æ£€ç´¢
  recall(query: string, options?: RecallOptions): Promise<RecallResult>;
  
  // å·¥å…·è°ƒç”¨
  callTool(name: string, params: Record<string, unknown>): Promise<ToolResult>;
}
```

### MCTSDecisionEngineç±»

```typescript
class MCTSDecisionEngine {
  constructor(
    simulationPolicy: SimulationPolicy,
    config?: Partial<MCTSConfig>,
    stateEvaluator?: StateEvaluator
  );
  
  // æ‰§è¡Œå†³ç­–
  decide(initialState: DecisionState, availableActions: Action[]): Promise<DecisionResult>;
  
  // æ›´æ–°é…ç½®
  updateConfig(newConfig: Partial<MCTSConfig>): void;
  
  // é‡ç½®å¼•æ“
  reset(): void;
}
```

### HierarchicalPlannerç±»

```typescript
class HierarchicalPlanner {
  constructor(config?: Partial<PlanningConfig>);
  
  // æ³¨å†Œä»»åŠ¡
  registerTask(task: Task): void;
  
  // ç”Ÿæˆè®¡åˆ’
  plan(rootTask: Task, initialState: WorldState): Promise<PlanningResult>;
  
  // æ‰§è¡Œè®¡åˆ’
  executePlan(plan: Plan, context: ExecutionContext): Promise<ExecutionResult>;
  
  // æ›´æ–°é…ç½®
  updateConfig(newConfig: Partial<PlanningConfig>): void;
}
```

### VectorDatabaseç±»

```typescript
abstract class VectorDatabase {
  // åˆå§‹åŒ–
  abstract initialize(): Promise<void>;
  
  // å…³é—­è¿æ¥
  abstract close(): Promise<void>;
  
  // æ’å…¥æ–‡æ¡£
  abstract insert(document: VectorDocument): Promise<void>;
  
  // æ‰¹é‡æ’å…¥
  abstract insertBatch(documents: VectorDocument[]): Promise<void>;
  
  // å‘é‡æœç´¢
  abstract search(vector: number[], options?: SearchOptions): Promise<SearchResult[]>;
  
  // æ··åˆæœç´¢
  abstract hybridSearch(query: string, vector: number[], options?: HybridSearchOptions): Promise<SearchResult[]>;
  
  // æ–‡æœ¬æœç´¢
  abstract textSearch(query: string, options?: SearchOptions): Promise<SearchResult[]>;
  
  // è¿‡æ»¤æœç´¢
  abstract filterSearch(filter: Record<string, unknown>, options?: SearchOptions): Promise<SearchResult[]>;
}
```

---

## é«˜çº§ç®—æ³•

### MCTSç®—æ³•è¯¦è§£

è’™ç‰¹å¡æ´›æ ‘æœç´¢åŒ…å«å››ä¸ªé˜¶æ®µï¼š

1. **é€‰æ‹© (Selection)**: ä½¿ç”¨UCB1ç®—æ³•é€‰æ‹©æœ€æœ‰æ½œåŠ›çš„èŠ‚ç‚¹
2. **æ‰©å±• (Expansion)**: æ·»åŠ æ–°çš„å­èŠ‚ç‚¹åˆ°æ ‘ä¸­
3. **æ¨¡æ‹Ÿ (Simulation)**: éšæœºæ¨¡æ‹Ÿåˆ°ç»ˆæ­¢çŠ¶æ€
4. **åå‘ä¼ æ’­ (Backpropagation)**: æ›´æ–°è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„ç»Ÿè®¡ä¿¡æ¯

```
        [Root]
       /  |  \
    [A]  [B]  [C]    â† é€‰æ‹©é˜¶æ®µ
     |
    [A1] [A2]         â† æ‰©å±•é˜¶æ®µ
     |
    (æ¨¡æ‹Ÿ...)         â† æ¨¡æ‹Ÿé˜¶æ®µ
     |
    æ›´æ–°ç»Ÿè®¡           â† åå‘ä¼ æ’­
```

### HTNè§„åˆ’è¯¦è§£

å±‚æ¬¡ä»»åŠ¡ç½‘ç»œè§„åˆ’æµç¨‹ï¼š

1. **ä»»åŠ¡åˆ†è§£**: å°†å¤åˆä»»åŠ¡é€’å½’åˆ†è§£ä¸ºåŸå­ä»»åŠ¡
2. **æ–¹æ³•é€‰æ‹©**: æ ¹æ®é€‚ç”¨æ¡ä»¶é€‰æ‹©æœ€ä½³åˆ†è§£æ–¹æ³•
3. **ååºçº¦æŸ**: å»ºç«‹ä»»åŠ¡é—´çš„æ‰§è¡Œé¡ºåºçº¦æŸ
4. **çº¿æ€§åŒ–**: å°†ååºè®¡åˆ’è½¬æ¢ä¸ºå¯æ‰§è¡Œåºåˆ—

```
[å®Œæˆé¡¹ç›®]
    |
    â”œâ”€â”€ [éœ€æ±‚åˆ†æ]
    â”‚       â””â”€â”€ (åŸå­ä»»åŠ¡)
    â”œâ”€â”€ [å¼€å‘å®ç°]
    â”‚       â””â”€â”€ (åŸå­ä»»åŠ¡)
    â””â”€â”€ [æµ‹è¯•éƒ¨ç½²]
            â””â”€â”€ (åŸå­ä»»åŠ¡)
```

---

## ç¤ºä¾‹ä»£ç 

### å®Œæ•´æ™ºèƒ½ä½“ç¤ºä¾‹

```typescript
import { Agent } from './src/agent/agent.js';
import { MCTSFactory } from './src/algorithms/mcts-decision-engine.js';
import { InjectionDetectorFactory } from './src/security/prompt-injection-detector.js';
import { VectorDatabaseManager } from './src/memory/vector-database.js';
import { EmbeddingProviderFactory } from './src/embeddings/embedding-provider.js';

async function main() {
  // 1. åˆå§‹åŒ–ç»„ä»¶
  const embedder = EmbeddingProviderFactory.create({
    provider: 'openai',
    model: 'text-embedding-3-small'
  });
  
  const dbManager = new VectorDatabaseManager(embedder);
  const memoryDB = dbManager.createMemoryDB('agent-memory', {
    dimension: 1536
  });
  
  const detector = InjectionDetectorFactory.createBalanced();
  const decisionEngine = MCTSFactory.createBalanced();
  
  // 2. åˆ›å»ºæ™ºèƒ½ä½“
  const agent = new Agent({
    name: 'Assistant',
    decisionEngine,
    injectionDetector: detector,
    memoryManager: dbManager
  });
  
  // 3. å¤„ç†ç”¨æˆ·è¾“å…¥
  const userInput = 'å¸®æˆ‘åˆ†æè¿™ä»½æ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š';
  
  // å®‰å…¨æ£€æŸ¥
  const securityCheck = await detector.detect(userInput);
  if (securityCheck.isInjection) {
    console.error('æ£€æµ‹åˆ°æ¶æ„è¾“å…¥:', securityCheck.attackTypes);
    return;
  }
  
  // 4. æ£€ç´¢ç›¸å…³è®°å¿†
  const memories = await dbManager.searchByText('agent-memory', userInput, {
    limit: 5
  });
  
  // 5. æ‰§è¡Œå†³ç­–
  const decision = await agent.decide({
    input: userInput,
    context: memories.map(m => m.document.content).join('\n'),
    availableActions: [
      { id: 'analyze', name: 'æ•°æ®åˆ†æ' },
      { id: 'generate', name: 'ç”ŸæˆæŠ¥å‘Š' },
      { id: 'search', name: 'æœç´¢ä¿¡æ¯' }
    ]
  });
  
  // 6. æ‰§è¡ŒåŠ¨ä½œ
  const result = await agent.execute(decision.selectedAction);
  
  // 7. å­˜å‚¨ç»“æœåˆ°è®°å¿†
  await dbManager.insertWithEmbedding(
    'agent-memory',
    `interaction-${Date.now()}`,
    `ç”¨æˆ·: ${userInput}\nåŠ©æ‰‹: ${result.output}`,
    { type: 'conversation' }
  );
  
  console.log('ç»“æœ:', result.output);
}

main().catch(console.error);
```

---

## æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜ç­–ç•¥

- **åµŒå…¥ç¼“å­˜**: é¿å…é‡å¤è®¡ç®—æ–‡æœ¬åµŒå…¥
- **æœç´¢ç»“æœç¼“å­˜**: ç¼“å­˜é¢‘ç¹æŸ¥è¯¢çš„ç»“æœ
- **MCTSæ ‘ç¼“å­˜**: å¤ç”¨æœç´¢æ ‘è¿›è¡Œå¢é‡å†³ç­–

### 2. å¹¶è¡Œå¤„ç†

- **å¹¶è¡Œæ¨¡æ‹Ÿ**: MCTSå¤šçº¿ç¨‹æœç´¢
- **æ‰¹é‡åµŒå…¥**: ä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªæ–‡æœ¬
- **å¹¶å‘æ•°æ®åº“æ“ä½œ**: å¼‚æ­¥æ‰¹é‡æ’å…¥/æŸ¥è¯¢

### 3. èµ„æºç®¡ç†

- **è¿æ¥æ± **: æ•°æ®åº“è¿æ¥å¤ç”¨
- **æ²™ç®±æ± **: é¢„åˆ›å»ºæ²™ç®±å®ä¾‹
- **å†…å­˜é™åˆ¶**: é˜²æ­¢å†…å­˜æ³„æ¼

---

## è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹

1. Fork ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª ESLint é…ç½®
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

---

## è®¸å¯è¯

[MIT](LICENSE) Â© SDKWork Team

---

<p align="center">
  <strong>Made with â¤ï¸ by SDKWork Team</strong>
</p>
